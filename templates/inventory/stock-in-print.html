{% extends "layout.html" %}
{% load static %}
{% block content %}

<div class="page-wrapper">
<div class="content">

<div class="page-header">
<div class="page-title">
<h4>Stock In Receipt #{{ stock_in.id }}</h4>
<h6>Stock In Receipt</h6>
</div>
<div class="page-btn">
<a href="javascript:void(0);" class="btn btn-added mb-2" onclick="window.print()">
<img src="{% static 'assets/img/icons/printer.svg' %}" alt="img" class="me-1">
Print Receipt
</a>
<a href="{% url 'stock_in_detail' stock_in.id %}" class="btn btn-cancel">
<img src="{% static 'assets/img/icons/closes.svg' %}" alt="img" class="me-1">
Close
</a>
</div>
</div>

<div class="card">
<div class="card-body">
<div class="invoice-box">
<div class="row">
<div class="col-lg-12">
<div class="invoice-header text-center mb-4">
    <h2 class="text-uppercase">STOCK IN RECEIPT</h2>
    <p class="mb-1">Receipt No: <strong>#{{ stock_in.id }}</strong></p>
    <p>Date: <strong>{{ stock_in.created_at|date:"d/m/Y" }}</strong></p>
</div>
</div>
</div>

<hr>

<div class="row mb-4">
<div class="col-lg-12">
<h5 class="form-title"><span>Supplier Information</span></h5>
</div>
<div class="col-lg-6">
<div class="invoice-to">
    <p><strong>Supplier Name:</strong> {{ stock_in.supplier.name }}</p>
    <p><strong>Contact Person:</strong> {{ stock_in.supplier.contact_person }}</p>
</div>
</div>
<div class="col-lg-6">
<div class="invoice-to">
    <p><strong>Phone:</strong> {{ stock_in.supplier.phone }}</p>
    <p><strong>Email:</strong> {{ stock_in.supplier.email }}</p>
    <p><strong>Address:</strong> {{ stock_in.supplier.address }}</p>
</div>
</div>
</div>

<div class="row mb-4">
<div class="col-lg-12">
<h5 class="form-title"><span>Stock In Details</span></h5>
</div>
<div class="col-lg-12">
<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>No.</th>
                <th>Product Code</th>
                <th>Product Name</th>
                <th>Category</th>
                <th>Unit</th>
                <th class="text-end">Quantity</th>
                <th class="text-end">Unit Price</th>
                <th class="text-end">Total Amount</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>{{ stock_in.product.product_id }}</td>
                <td>
                    <strong>{{ stock_in.product.name }}</strong>
                </td>
                <td>{{ stock_in.product.category.name }}</td>
                <td>{{ stock_in.product.unit }}</td>
                <td class="text-end"><strong>{{ stock_in.quantity }}</strong></td>
                <td class="text-end">{{ stock_in.unit_price|floatformat:0 }} ₫</td>
                <td class="text-end"><strong>{{ stock_in.total_cost|floatformat:0 }} ₫</strong></td>
            </tr>
        </tbody>
        <tfoot>
            <tr class="table-light">
                <td colspan="7" class="text-end"><strong>TOTAL VALUE:</strong></td>
                <td class="text-end">
                    <h5 class="text-danger mb-0"><strong>{{ stock_in.total_cost|floatformat:0 }} ₫</strong></h5>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
</div>
</div>

<div class="row mb-4">
<div class="col-lg-12">
<h5 class="form-title"><span>Inventory Information</span></h5>
</div>
<div class="col-lg-12">
<div class="card">
    <div class="card-body bg-light">
        <div class="row">
            <div class="col-md-4">
                <p class="mb-2"><strong>Stock before import:</strong></p>
                <h5>{{ old_qty }} {{ stock_in.product.unit }}</h5>
            </div>
            <div class="col-md-4">
                <p class="mb-2"><strong>Import Quantity:</strong></p>
                <h5 class="text-success">+{{ stock_in.quantity }} {{ stock_in.product.unit }}</h5>
            </div>
            <div class="col-md-4">
                <p class="mb-2"><strong>Stock after import:</strong></p>
                <h5 class="text-primary">{{ stock_in.updated_quantity }} {{ stock_in.product.unit }}</h5>
            </div>
        </div>
    </div>
</div>
</div>
</div>


{% if stock_in.note %}
<div class="row mb-4">
<div class="col-lg-12">
<h5 class="form-title"><span>Notes</span></h5>
</div>
<div class="col-lg-12">
<div class="alert alert-warning">
    <i class="fas fa-sticky-note me-2"></i>{{ stock_in.note }}
</div>
</div>
</div>
{% endif %}

<div class="row mt-5">
<div class="col-lg-12">
<h5 class="form-title"><span>Confirmation</span></h5>
</div>
<div class="col-lg-3 col-sm-6 text-center">
<p><strong>Created By</strong></p>
<p><em>(Sign and write full name)</em></p>
<br><br><br>
<p class="border-top pt-2 d-inline-block">{{ stock_in.created_by.get_full_name|default:stock_in.created_by.username }}</p>
</div>
<div class="col-lg-3 col-sm-6 text-center">
<p><strong>Warehouse Keeper</strong></p>
<p><em>(Sign and write full name)</em></p>
<br><br><br>
<p class="border-top pt-2 d-inline-block">_____________________</p>
</div>
<div class="col-lg-3 col-sm-6 text-center">
<p><strong>Deliverer</strong></p>
<p><em>(Sign and write full name)</em></p>
<br><br><br>
<p class="border-top pt-2 d-inline-block">_____________________</p>
</div>
<div class="col-lg-3 col-sm-6 text-center">
<p><strong>Accountant</strong></p>
<p><em>(Sign and write full name)</em></p>
<br><br><br>
<p class="border-top pt-2 d-inline-block">_____________________</p>
</div>
</div>

<div class="row mt-4">
<div class="col-lg-12 text-center">
<hr>
<p class="text-muted"><small>Receipt printed at: {{ print_date|date:"d/m/Y H:i:s" }}</small></p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<style>
@media print {
.page-header,
.sidebar,
.header,
.no-print {
display: none !important;
}

.page-wrapper {
margin: 0 !important;
padding: 0 !important;
}

.content {
margin: 0 !important;
padding: 20px !important;
}

.card {
border: none !important;
box-shadow: none !important;
}
}
</style>

{% endblock %}